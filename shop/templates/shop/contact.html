{% extends 'shop/base.html' %}
{% load static %}

{% block title %}TechMart - Contact{% endblock %}

{% block content %}
<div class="contact-container">
  <div class="left-col"></div>
  <div class="right-col">
    
    <h1 class="type-title"><span id="contact-type"></span><span class="type-cursor">|</span></h1>
    <p>Got any questions? Contact us and we'll get back to you as soon as possible.</p>
    
    <form id="contact-form" method="post">
      {% csrf_token %}
      <label for="name">Full name</label>
      <input type="text" id="name" name="name" placeholder="Your Full Name" required>
      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" placeholder="Your Email Address" required>
      <label for="message">Message</label>
      <textarea rows="6" placeholder="Your Message" id="message" name="message" required></textarea>
      <button type="submit" id="submit" name="submit">
        <div class="svg-wrapper-1">
          <div class="svg-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="none" d="M0 0h24v24H0z"></path>
              <path fill="currentColor" d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"></path>
            </svg>
          </div>
        </div>
        <span>Send</span>
      </button>
    </form>
    <div id="error"></div>
    <div id="success-msg"></div>
  </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
:root {
  --primary-color: #010712;
  --secondary-color: #818386;
  --bg-color: #000000;
  --button-color: #3B3636;
  --h1-color: #3F444C;
}

[data-theme="dark"] {
  --primary-color: #FCFDFD;
  --secondary-color:rgb(134, 129, 130);
  --bg-color: #000000;
  --button-color:#512232;
  --h1-color: #FCFDFD;
}

/* Scope resets to contact page only to avoid impacting base navbar */
html, body { margin: 0; }
.contact-container, .contact-container * { box-sizing: border-box; }
/* Force page background to pure black to avoid teal bleed from base */
body { background: #000000 !important; }

/* Use site font (inherits Inter from base) - scoped to right column */
.right-col h1, .right-col label, .right-col p, .right-col input, .right-col textarea, .contact-container button { font-family: inherit; }

.contact-container { display: flex; width: 100vw; height: calc(100vh - 80px); margin-top: 0; background: var(--bg-color); }

.left-col { flex: 0 0 45vw; height: 100%; background-image: url("https://images.unsplash.com/photo-1623970405357-1eb737075953?q=80&w=736&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"); background-size: cover; background-repeat: no-repeat; background-position: center center; }

/* removed top-left overlay logo */

.right-col { background: var(--bg-color); width: 55vw; height: 100%; padding: 5rem 3.5rem; position: relative; z-index: 1; }

.right-col h1 { color:var(--h1-color); text-transform: uppercase; font-size: 2.5rem; letter-spacing: 0.5rem; font-weight: 800; }

/* typing cursor */
.type-title { display: inline-block; }
.type-cursor { margin-left: 6px; display: inline-block; animation: blink 0.8s infinite; }
@keyframes blink { 0%,100%{ opacity: 1 } 50% { opacity: 0 } }

.right-col p { color: var(--secondary-color); font-size: 0.9rem; letter-spacing: 0.01rem; width: 40vw; margin: 0.25rem 0; }

.right-col label { color: var(--secondary-color); text-transform: uppercase; font-size: 0.625rem; }

.right-col form { width: 31.25rem; position: relative; margin-top: 2rem; padding: 1rem 0; }

.right-col input, .right-col textarea, .right-col label { width: 40vw; display: block; }

.right-col input::placeholder, .right-col textarea::placeholder { color: var(--primary-color); }

.right-col input, .right-col textarea { color: var(--primary-color); font-weight: 500; background: var(--bg-color); border: none; border-bottom: 1px solid var(--secondary-color); padding: 0.5rem 0; margin-bottom: 1rem; outline: none; }

.right-col textarea { resize: none; }

.contact-container button { text-transform: uppercase; font-weight: 600; background: var(--button-color); color: var(--bg-color); width: 10rem; height: 2.25rem; border: none; border-radius: 4px; outline: none; cursor: pointer; transition: all .2s ease; }

/* Animated Send button styling (scoped to #submit). Keeps existing width/height */
#submit { font-family: inherit; font-size: 14px; color: #ffffff; padding: 0.7em 1em; padding-left: 0.9em; display: flex; align-items: center; border-radius: 8px; overflow: hidden; transition: all 0.2s; }
#submit span { display: block; margin-left: 0.3em; transition: all 0.3s ease-in-out; }
#submit svg { display: block; transform-origin: center center; transition: transform 0.3s ease-in-out; width: 16px; height: 16px; }
#submit .svg-wrapper-1 { display: flex; }
#submit:hover .svg-wrapper { animation: fly-1 0.6s ease-in-out infinite alternate; }
#submit:hover svg { transform: translateX(1.2em) rotate(45deg) scale(1.1); }
#submit:hover span { transform: translateX(5em); }
#submit:active { transform: scale(0.95); }

@keyframes fly-1 {
  from { transform: translateY(0.1em); }
  to { transform: translateY(-0.1em); }
}

/* Remove hover/active animations; keep simple states */
input:hover, textarea:hover, .contact-container button:hover { opacity: 1; }
.contact-container button:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,.35); background: linear-gradient(135deg, #2e2e2e 0%, #3f3f3f 100%); }
.contact-container button:active { transform: translateY(0); box-shadow: none; }

/* (removed dark mode toggle) */

#error, #success-msg { width: 40vw; margin: 0.125rem 0; font-size: 0.75rem; text-transform: uppercase; color: var(--secondary-color); }

@media only screen and (max-width: 950px) {
  /* removed logo */
  h1 { font-size: 1.75rem; }
  p { font-size: 0.7rem; }
  input, textarea, button { font-size: 0.65rem; }
  .description { font-size: 0.6rem; margin-left: 0.4rem; }
  button { width: 7rem; }
  .theme-switch-wrapper { width: 120px; }
  .theme-switch { height: 28px; width: 50px; }
  .slider:before { width: 20px; height: 20px; }
  input:checked + .slider:before { transform: translateX(16px); }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
// Dark mode toggle removed for this page; default to site theme (dark)
document.documentElement.setAttribute('data-theme', 'dark');

// Typing animation for CONTACT US
(function() {
  const el = document.getElementById('contact-type');
  if (!el) return;
  const full = 'CONTACT US';
  const typingSpeed = 75; // ms per char
  let charIndex = 0;

  function tick() {
    if (charIndex < full.length) {
      el.textContent = full.substring(0, charIndex + 1);
      charIndex++;
      setTimeout(tick, typingSpeed);
    }
  }
  tick();
})();

const nameField = document.getElementById('name');
const emailField = document.getElementById('email');
const messageField = document.getElementById('message');
const submitBtn = document.getElementById('submit');
const errorElement = document.getElementById('error');
const successMsg = document.getElementById('success-msg');

const emailIsValid = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

const validate = (e) => {
  e.preventDefault();
  if (nameField.value.length < 3) { errorElement.textContent = 'Your name should be at least 3 characters long.'; return false; }
  if (!emailIsValid(emailField.value)) { errorElement.textContent = 'Please enter a valid email address.'; return false; }
  if (messageField.value.length < 15) { errorElement.textContent = 'Please write a longer message.'; return false; }
  errorElement.textContent = ''; successMsg.textContent = 'Thank you! I will get back to you as soon as possible.';
  setTimeout(function () { successMsg.textContent = ''; document.getElementById('contact-form').reset(); }, 3000);
  return true;
};
if (submitBtn) submitBtn.addEventListener('click', validate);
</script>
{% endblock %}
