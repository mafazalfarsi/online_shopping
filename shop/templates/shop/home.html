{% extends 'shop/base.html' %}
{% load static %}

{% block title %}TechMart - Your World, From New Heights{% endblock %}

{% block content %}


<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-background">
        <img src="{% static 'shop/images/lilian-velet-oHY0NfxZsJc-unsplash.jpg' %}" alt="Drone flying in dark sky" class="hero-image">
        <div class="hero-overlay"></div>
    </div>
    <div class="hero-content">
        <h1 class="hero-title">Your World, From New Heights</h1>
        <p class="hero-subtitle">Advanced technologies for modern living with full service support</p>
        <div class="hero-cta">
                    <a href="{% url 'category_list' %}" class="cta-button">Explore Products</a>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <h2 class="section-title scroll-reveal">
            <p class="scroll-reveal-text">
                <span class="word">Why</span>
                <span class="word">choose</span>
                <span class="word">TechMart?</span>
                
            </p>
        </h2>
        <div class="features-grid">
            <div class="feature-card">
                <span class="glow-layer" aria-hidden="true"></span>
                <div class="feature-front">
                    <div class="feature-icon">üöÄ</div>
                    <h3>Cutting-Edge Tech</h3>
                </div>
                <div class="feature-back">
                    <p>Latest innovations and advanced technology solutions</p>
                </div>
            </div>
            <div class="feature-card">
                <span class="glow-layer" aria-hidden="true"></span>
                <div class="feature-front">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h3>Reliable Support</h3>
                </div>
                <div class="feature-back">
                    <p>24/7 customer service and technical assistance</p>
                </div>
            </div>
            <div class="feature-card">
                <span class="glow-layer" aria-hidden="true"></span>
                <div class="feature-front">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Fast Delivery</h3>
                </div>
                <div class="feature-back">
                    <p>Quick shipping and secure delivery worldwide</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Products Preview -->
<section class="products-preview">
    <div class="container">
        <h2 class="section-title scroll-reveal">
            <p class="scroll-reveal-text">
                <span class="word">Featured</span>
                <span class="word">Products</span>
            </p>
        </h2>
        <div class="products-grid">
            {% for product in products|slice:":6" %}
            <div class="product-card">
                <a href="{% url 'product_detail' product.id %}" class="product-link">
                    {% if product.image_url %}
                    <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                    <div class="product-placeholder">üì±</div>
                    {% endif %}
                    <div class="product-name">{{ product.name }}</div>
                    <div class="product-price">OMR {{ product.price }}</div>
                    <div class="product-description">{{ product.description|default:"No description available" }}</div>
                </a>
                <form action="{% url 'add_to_cart' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                </form>
            </div>
            {% empty %}
            <div class="no-products">
                <p>No products available at the moment.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    /* Reset and Base Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Arial', sans-serif;
        line-height: 1.6;
        color: white;
        background: #000;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    /* Hero Section */
    .hero-section {
        position: relative;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
    }

    .hero-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
    }

    .hero-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
    }

    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(51, 51, 51, 0.4);
        z-index: -1;
    }

    .hero-content {
        max-width: 800px;
        padding: 0 20px;
        z-index: 1;
    }

    .hero-title {
        font-size: 4rem;
        font-weight: bold;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(51, 51, 51, 0.7);
        line-height: 1.2;
    }

    .hero-subtitle {
        font-size: 1.3rem;
        margin-bottom: 40px;
        opacity: 0.9;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    }

    .hero-cta {
        margin-top: 30px;
        text-align: center;
    }

    .cta-button {
        display: inline-block;
        background: white;
        color: #333;
        padding: 15px 30px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        font-size: 1.1rem;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        transition: all 0.3s ease;
        border: 2px solid white;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    .cta-button:hover {
        background: transparent;
        color: white;
        border-color: white;
    }

    /* hover */
    .button:hover .hover-text {
        width: 100%;
        filter: drop-shadow(0 0 23px var(--animation-color));
    }

    /* Features Section */
    .features-section {
        padding: 80px 0;
        background: #111;
    }

    .section-title {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 60px;
        color: white;
    }

    /* Scroll Reveal Animation */
    .scroll-reveal {
        margin: 20px 0;
        transform-origin: 0% 50%;
        transform: rotate(5deg);
        opacity: 0.1;
    }

    .scroll-reveal-text {
        font-size: clamp(1.6rem, 4vw, 3rem);
        line-height: 1.5;
        font-weight: 600;
        text-align: center;
        color: white;
    }

    .word {
        display: inline-block;
        opacity: 0.1;
        filter: blur(10px);
        will-change: opacity, filter, transform;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 40px;
        margin-top: 40px;
    }

    .feature-card {
        position: relative;
        background: rgba(255, 255, 255, 0.05);
        padding: 40px 30px;
        border-radius: 12px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        overflow: hidden;
        /* Glow vars */
        --glow-x: 50%;
        --glow-y: 50%;
        --glow-intensity: 0;
        --glow-radius: 200px;
    }
    .feature-card::before,
    .feature-card::after {
        position: absolute;
        content: "";
        width: 20%;
        height: 20%;
        background-color: rgba(99, 14, 39, 0.25);
        transition: all 0.5s;
        z-index: 0;
    }
    .feature-card::before { top:0; right:0; border-radius: 0 12px 0 100%; }
    .feature-card::after { bottom:0; left:0; border-radius: 0 100% 0 12px; }
    .feature-card:hover::before,
    .feature-card:hover::after { width:100%; height:100%; border-radius:12px; }

    /* Glow border layer */
    .feature-card .glow-layer {
        position: absolute;
        inset: 0;
        padding: 6px;
        border-radius: 12px;
        pointer-events: none;
        z-index: 2;
        background: radial-gradient(var(--glow-radius) circle at var(--glow-x) var(--glow-y),
            rgba(220, 40, 100, calc(var(--glow-intensity) * 0.35)) 0%,
            rgba(220, 40, 100, calc(var(--glow-intensity) * 0.2)) 30%,
            transparent 60%);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity .3s ease;
    }
    .feature-card:hover .glow-layer { opacity: 1; }

    .feature-icon { font-size:3rem; margin-bottom:20px; }

    .feature-front, .feature-back { position: relative; z-index: 1; }
    .feature-back { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:0 20px; opacity:0; transform: translateY(10px); transition: all .35s ease; }
    .feature-front { transition: all .35s ease; }
    .feature-card:hover .feature-front { opacity:0; transform: translateY(-10px); }
    .feature-card:hover .feature-back { opacity:1; transform: translateY(0); }

    .feature-card h3 { font-size:1.5rem; margin-bottom:15px; color:white; }
    .feature-card p { color: rgba(255,255,255,0.9); line-height:1.6; }

    /* Products Preview */
    .products-preview {
        padding: 80px 0;
        background:rgb(17, 17, 17);
    }

    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-top: 40px;
        max-width: 1600px;
        margin-left: auto;
        margin-right: auto;
    }

    .product-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        cursor: default;
    }

    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        background: rgba(255, 255, 255, 0.95);
        border-color: rgba(255, 255, 255, 0.2);
    }

    .product-image { width: 150px; height: 150px; object-fit: cover; border-radius: 15px; margin: 0 auto 20px; background: #f5f5f5; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

    .product-placeholder { width: 150px; height: 150px; border-radius: 15px; margin: 0 auto 20px; background: #f5f5f5; box-shadow: 0 5px 15px rgba(0,0,0,0.1); display:flex; align-items:center; justify-content:center; font-size:3em; color:#ccc; }

    .product-name { font-size: 1.3em; font-weight: 600; color: #333; margin: 15px 0; }

    .product-price { font-size: 1.4em; font-weight: 700; color: #000; margin-bottom: 15px; }

    .product-description { color: #666; font-size: 0.95em; line-height: 1.5; margin: 0 0 20px 0; }

    .add-to-cart-btn { width: 100%; padding: 12px; background: linear-gradient(135deg,rgb(0, 0, 0) 0%,rgb(65, 65, 65) 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; min-height: 44px; display: flex; align-items: center; justify-content: center; }
    .add-to-cart-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102,126,234,0.3); }

    .no-products {
        text-align: center;
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.1em;
        grid-column: 1 / -1;
    }

    .product-card-link { text-decoration: none; color: inherit; display: block; }
    .product-link { text-decoration: none; color: inherit; display: block; transition: all 0.3s ease; }
    .product-link:hover .product-name { color: #667eea; }

    /* Responsive Design */
    @media (max-width: 768px) {
        .nav-container {
            flex-direction: column;
            gap: 15px;
        }

        .nav-left, .nav-center, .nav-right {
            gap: 15px;
        }

        .hero-title {
            font-size: 2.5rem;
        }

        .hero-subtitle {
            font-size: 1.1rem;
        }

        .features-grid {
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .products-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .section-title {
            font-size: 2rem;
        }
    }

    @media (max-width: 480px) {
        .hero-title {
            font-size: 2rem;
        }

        .hero-subtitle {
            font-size: 1rem;
        }

        .cta-button {
            padding: 12px 24px;
            font-size: 1rem;
        }

        .feature-card {
            padding: 30px 20px;
        }

        .product-info {
            padding: 15px;
        }
    }
</style>

<script>
// Function to update cart quantity display
function updateCartQuantityDisplay() {
    const cartButton = document.querySelector('.btn-cart');
    if (cartButton) {
        const currentQuantity = cartButton.getAttribute('data-quantity');
        // The quantity is already set by Django template, just ensure it's displayed
        console.log('Current cart quantity:', currentQuantity);
    }
}

// Update cart quantity display when page loads
document.addEventListener('DOMContentLoaded', function() {
    updateCartQuantityDisplay();
});

// Function to refresh the page to get updated cart data
function refreshCartQuantity() {
    // Reload the page to get fresh cart data from Django session
    window.location.reload();
}

// Add event listener for cart updates (you can call this from other cart operations)
window.addEventListener('cartUpdated', function() {
    refreshCartQuantity();
});

// Scroll Reveal Animation (support multiple headings)
function initScrollReveal() {
    const revealBlocks = document.querySelectorAll('.scroll-reveal');
    if (!revealBlocks.length) return;

    const observerOptions = {
        threshold: 0,
        rootMargin: '0px 0px -20% 0px'
    };

    const applyReveal = (scrollReveal) => {
        const words = scrollReveal.querySelectorAll('.word');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    scrollReveal.style.transition = 'all 1s ease-out';
                    scrollReveal.style.transform = 'rotate(0deg)';
                    scrollReveal.style.opacity = '1';
                    words.forEach((word, index) => {
                        setTimeout(() => {
                            word.style.transition = 'all 0.8s ease-out';
                            word.style.opacity = '1';
                            word.style.filter = 'blur(0px)';
                        }, index * 50);
                    });
                } else {
                    scrollReveal.style.transition = 'all 0.5s ease-out';
                    scrollReveal.style.transform = 'rotate(5deg)';
                    scrollReveal.style.opacity = '0.1';
                    words.forEach((word) => {
                        word.style.transition = 'all 0.5s ease-out';
                        word.style.opacity = '0.1';
                        word.style.filter = 'blur(10px)';
                    });
                }
            });
        }, observerOptions);
        observer.observe(scrollReveal);
    };

    revealBlocks.forEach(applyReveal);
}

// Initialize scroll reveal animation when page loads
document.addEventListener('DOMContentLoaded', function() {
    initScrollReveal();

    // Border glow mechanic for feature cards
    const cards = document.querySelectorAll('.feature-card');
    cards.forEach((card) => {
        const onMove = (e) => {
            const rect = card.getBoundingClientRect();
            const x = ((e.clientX - rect.left) / rect.width) * 100;
            const y = ((e.clientY - rect.top) / rect.height) * 100;
            card.style.setProperty('--glow-x', `${x}%`);
            card.style.setProperty('--glow-y', `${y}%`);
            card.style.setProperty('--glow-intensity', '1');
        };
        const onLeave = () => card.style.setProperty('--glow-intensity', '0');
        card.addEventListener('mousemove', onMove);
        card.addEventListener('mouseleave', onLeave);
    });
});
</script>
{% endblock %} 